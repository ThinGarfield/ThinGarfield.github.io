---
title: My Simple Calculator
description: It can assign variables ("y=2^15"), use history item in input ("#5 * 3"), work on large numbers ("33^100"), perform arbitrary precision arithmetic ("N[33^100,30]"), and more
layout: default
permalink: /calc
---
<p>Session history: &nbsp <span id="sessionid" class="invisible"></span></p>
<div id='history'>
</div>
<hr>
<p>Input math expression below (use "clear" to clear session history):</p>
<div id='input' class="calcitem">
    <div class="calclabel">[<span id="inputidx">1</span>]:</div>
    <input id="inputbox" class="calccontent" type="text" height="200" onkeyup="monitorInput(event)">
</div>
<script>
    var itemCount = 1;
    var sessionid = 0;
    genSessionid();

    function genSessionid() {
        // var decodedCookie = decodeURIComponent(document.cookie);
        // var ca = decodedCookie.split(';');
        // for (var i = 0; i < ca.length; i++) {
        //     var c = ca[i];
        //     while (c.charAt(0) == ' ') {
        //         c = c.substring(1);
        //     }
        //     if (c.indexOf("sessionid=") == 0) {
        //         return c.substring(name.length, c.length);
        //     }
        // }
        sessionid = "S_" + Math.random() * 10000000000;
        document.getElementById("sessionid").innerHTML = sessionid;
        //        document.cookie = "sessionid=" + sessionid;
    }

    function clearHistory() {
        document.getElementById("history").innerHTML = "";
        genSessionid();
        itemCount = 1;
        document.getElementById("inputidx").innerText = itemCount;
        document.getElementById("sessionid").innerHTML = sessionid;
    }

    function postServer(inputText) {
        setOutput(inputText, inputText);
    }

    function createEntry(inOut, text) { // true=in, false=out
        var item = document.createElement("div");
        item.className = "calcitem";
        var label = document.createElement("div");
        label.className = "calclabel";
        label.innerText = (inOut ? "In[" : "Out[") + itemCount + "]:";
        item.appendChild(label);
        var content = document.createElement("div");
        content.className = "calchistory";
        if (inOut) {
            content.innerHTML = "<pre>" + text + "</pre>";
        } else {
            content.innerHTML = "$$" + text + "$$";
            MathJax.Hub.Queue(["Typeset", MathJax.Hub, content]);
        }
        item.appendChild(content);
        document.getElementById("history").append(item);
    }
    function setOutput(inputText, outputText) {
        createEntry(true, inputText);
        createEntry(false, outputText);
        itemCount++;
        document.getElementById("inputidx").innerText = itemCount;
        document.getElementById("sessionid").innerHTML = sessionid;
    }

    function monitorInput(event) {
        if (event.key !== "Enter") return;
        var inputText = document.getElementById("inputbox").value;
        document.getElementById("inputbox").value = "";
        if (inputText === "clear") {
            clearHistory();
        } else {
            postServer(inputText);
        }
    }
</script>